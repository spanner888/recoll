<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
  <head>
    <title>Upgrading to xapian 1.0.x</title>

    <meta name="generator" content="HTML Tidy, see www.w3.org">
    <meta name="Author" content="Jean-Francois Dockes">
    <meta name="Description" content=
    "Upgrading a recoll installation from xapian 0.9 to 1.0">
    <meta name="Keywords" content="recoll, xapian, upgrade">
    <meta http-equiv="Content-language" content="en">
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
    <meta name="robots" content="All,Index,Follow">

    <link type="text/css" rel="stylesheet" href="styles/style.css">
  </head>

  <body>
    
    <div class="rightlinks">
      <ul>
	<li><a href="index.html">Home</a></li>
	<li><a href="download.html">Downloads</a></li>
      </ul>
    </div>
    
    <div class="content">

      <h1>Upgrading to Xapian 1.0</h1>
      
      <p>Xapian has supported two main index formats for quite some
	time: the older <em>Quartz</em> format, and the
	newer <em>Flint</em></p>

      <p>Up to Xapian release 1.0, <em>Quartz</em> was the
	default. This is also quite probably what your Recoll index
	used, except if you had explicitely required a <em>Flint</em>
	index by setting the <tt>XAPIAN_PREFER_FLINT</tt> environment
	variable.</p> 

      <p>When upgrading an existing Recoll installation to Recoll 1.9,
	which is normally built with Xapian 1.0 (0.9 is still
	supported), or after rebuilding Recoll 1.8.2 with Xapian 1.0,
	you probably want to convert your index format
	to <em>Flint</em>, which is faster and more efficient (if you
	were using the default <em>Quartz</em>, you can also elect to
	just do nothing, the older <em>Quartz</em> format is still
	supported).</p>

      <p>The index format upgrade will not happen automatically, and
	you will need to destroy the old index explicitely, then
	restart the indexer (this will cause a full indexing pass, of
	course, which may take some time, so you may prefer to let it
	work overnight).</p>
      
      <p>To destroy the old index, you just need to erase the xapiandb
	directory: typically: rm -rf ~/.recoll/xapiandb, except if you
	specified a special storage place with the <tt>dbdir</tt>
	configuration variable.</p>

      <p>If you were using <em>Flint</em> with Xapian 0.9,
	you <em>must</em> destroy the old index,
	because <em>Flint</em> had an incompatible format change
	between 0.9 and 1.0</p>

    </div>
  </body>
</html>
